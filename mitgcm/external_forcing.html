

<!DOCTYPE html>


<html >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>External Forcing &#8212; Numerical Ocean Modeling</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'mitgcm/external_forcing';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Boundary Conditions" href="boundary_conditions.html" />
    <link rel="prev" title="Initial Conditions" href="initial_conditions.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Numerical Ocean Modeling
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/setting_up_python_and_jupyter.html">Installing Python and Jupyter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/setting_up_a_github_repository.html">Setting up a Github Repository</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/getting_familiar_with_jupyter_notebooks.html">Getting Familiar with Jupyter Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/installing_compiler_and_mpi.html">Installing a compiler with MPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/getting_familiar_with_unix_environments.html">Getting Familiar with Unix Environments</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Oceanography</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../oceanography/oceanography_overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../oceanography/wind_driven_circulation.html">Wind-Driven Circulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../oceanography/thermohaline_circulation.html">Thermohaline Circulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../oceanography/primitive_equations.html">Primitive Equations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../oceanography/momentum.html">Momentum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../oceanography/thermodynamics.html">Thermodynamics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../oceanography/equation_of_state.html">Equation of State</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Numerical Modeling</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../modeling/model_grids.html">Model Grids</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modeling/timestepping_schemes.html">Time-Stepping Schemes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modeling/subgridscale_parameterizations.html">Sub-Grid-Scale Parameterizations</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">MITgcm</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_MITgcm.html">Getting Started with MITgcm</a></li>
<li class="toctree-l1"><a class="reference internal" href="file_layout.html">File Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="choosing_an_optfile.html">Choosing an optfile</a></li>
<li class="toctree-l1"><a class="reference internal" href="defining_the_grid.html">Defining the Model Grid</a></li>
<li class="toctree-l1"><a class="reference internal" href="initial_conditions.html">Initial Conditions</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">External Forcing</a></li>
<li class="toctree-l1"><a class="reference internal" href="boundary_conditions.html">Boundary Conditions</a></li>
<li class="toctree-l1"><a class="reference internal" href="diagnosing_issues.html">Diagnosing Issues</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Computing Clusters</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../HPC/navigating_an_HPC.html">Navigating an HPC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../HPC/running_jobs_on_an_HPC.html">Running jobs on an HPC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../HPC/conda_environments_on_an_HPC.html">conda Environments</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Model Analysis</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../analysis/volume_budget.html">Volume Budgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../analysis/heat_budget.html">Heat Budgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../analysis/salt_budget.html">Salt Budgets</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../contributions.html">Contributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references.html">References</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fmitgcm/external_forcing.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/mitgcm/external_forcing.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>External Forcing</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#common-external-forcing-fields">Common External Forcing Fields</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example-fields">Example Fields</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-exf-package">The <code class="docutils literal notranslate"><span class="pre">exf</span></code> package</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exf-compile-time-considerations"><code class="docutils literal notranslate"><span class="pre">exf</span></code> Compile-Time Considerations</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exf-run-time-considerations"><code class="docutils literal notranslate"><span class="pre">exf</span></code> Run-Time Considerations</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#data-exf">data.exf</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#formatting-the-fields">Formatting the fields</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#temporal-interpolation">Temporal Interpolation</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#spatial-interpolation">Spatial Interpolation</a></li>
</ul>
</li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="external-forcing">
<h1>External Forcing<a class="headerlink" href="#external-forcing" title="Permalink to this headline">#</a></h1>
<p>External forcing fields (usually) refer to atmospheric parameters that modify the temperature, salinity, or momentum in the upper ocean. However, there are some occasionally-used external forcing fields that are implemented at the ocean floor, such as geothermal heat flux. The following table lists commonly-used external forcing fields:</p>
<section id="common-external-forcing-fields">
<h2>Common External Forcing Fields<a class="headerlink" href="#common-external-forcing-fields" title="Permalink to this headline">#</a></h2>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Field Name</p></th>
<th class="head"><p>Model Variable</p></th>
<th class="head"><p>Units</p></th>
<th class="text-left head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Surface Air Temperature</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ATEMP</span></code></p></td>
<td><p>K</p></td>
<td class="text-left"><p>If Celsius is used, an offset of 273.15 must be applied in the data.exf file.</p></td>
</tr>
<tr class="row-odd"><td><p>Surface Specific Humidity</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">AQH</span></code></p></td>
<td><p>kg H<span class="math notranslate nohighlight">\(_2\)</span>O per kg air</p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-even"><td><p>Downward shortwave radiation</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SWDOWN</span></code></p></td>
<td><p>W/m<span class="math notranslate nohighlight">\(^2\)</span></p></td>
<td class="text-left"><p>Downward positive by default. If units are upward positive, a <span class="math notranslate nohighlight">\(-1\)</span> scalar must be applied in the data.exf file.</p></td>
</tr>
<tr class="row-odd"><td><p>Downward longwave radiation</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">LWDOWN</span></code></p></td>
<td><p>W/m<span class="math notranslate nohighlight">\(^2\)</span></p></td>
<td class="text-left"><p>Downward positive by default. If units are upward positive, a <span class="math notranslate nohighlight">\(-1\)</span> scalar must be applied in the data.exf file.</p></td>
</tr>
<tr class="row-even"><td><p>Zonal Wind</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">UVEL</span></code></p></td>
<td><p>m/s</p></td>
<td class="text-left"><p>Wind is positive eastward <em>in model coordinates</em>, which is not necessarily east on the real globe, depending on the orientation of the model grid</p></td>
</tr>
<tr class="row-odd"><td><p>Meridional Wind</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VVEL</span></code></p></td>
<td><p>m/s</p></td>
<td class="text-left"><p>Wind is positive northward <em>in model coordinates</em>, which is not necessarily east on the real globe, depending on the orientation of the model grid</p></td>
</tr>
<tr class="row-even"><td><p>Precipitation</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PRECIP</span></code></p></td>
<td><p>m/s</p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-odd"><td><p>Runoff</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">RUNOFF</span></code></p></td>
<td><p>m/s</p></td>
<td class="text-left"><p></p></td>
</tr>
</tbody>
</table>
<section id="example-fields">
<h3>Example Fields<a class="headerlink" href="#example-fields" title="Permalink to this headline">#</a></h3>
<p>The following plot shows the 8 external forcing fields using the ECCO Version 5 Alpha State Estimate. The timesteps shown are for 15 January 2008.</p>
<img alt="ECCO Version 5 Alpha External Forcing Fields" class="align-center" src="../_images/ecco_exf_fields.png" />
</section>
</section>
<section id="the-exf-package">
<h2>The <code class="docutils literal notranslate"><span class="pre">exf</span></code> package<a class="headerlink" href="#the-exf-package" title="Permalink to this headline">#</a></h2>
<p>In MITgcm, the primary way to implement external forcing conditions is through the <code class="docutils literal notranslate"><span class="pre">exf</span></code> package.</p>
<section id="exf-compile-time-considerations">
<h3><code class="docutils literal notranslate"><span class="pre">exf</span></code> Compile-Time Considerations<a class="headerlink" href="#exf-compile-time-considerations" title="Permalink to this headline">#</a></h3>
<p>To enable the <code class="docutils literal notranslate"><span class="pre">exf</span></code> package for compilation, add a line for <code class="docutils literal notranslate"><span class="pre">exf</span></code> in the <code class="docutils literal notranslate"><span class="pre">packages.conf</span></code> files.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While the <code class="docutils literal notranslate"><span class="pre">exf</span></code> package does not strictly require the use of the <code class="docutils literal notranslate"><span class="pre">cal</span></code> package, many of the <code class="docutils literal notranslate"><span class="pre">exf</span></code> funtionality was built around tools from the <code class="docutils literal notranslate"><span class="pre">cal</span></code> package. With this in mind, it’s recommended that the <code class="docutils literal notranslate"><span class="pre">cal</span></code> package also be enabled by adding a line for <code class="docutils literal notranslate"><span class="pre">cal</span></code> in the <code class="docutils literal notranslate"><span class="pre">packages.conf</span></code> file.</p>
</div>
<p>Note that by default, the <a class="reference external" href="https://github.com/MITgcm/MITgcm/blob/master/pkg/exf/EXF_OPTIONS.h">EXF_OPTIONS.h</a> file is configured to use all of the fields listed in the table above. Further information is provided on the <a class="reference external" href="https://mitgcm.readthedocs.io/en/latest/phys_pkgs/exf.html">MITgcm documentation page</a> for the <code class="docutils literal notranslate"><span class="pre">exf</span></code> package.</p>
</section>
<section id="exf-run-time-considerations">
<h3><code class="docutils literal notranslate"><span class="pre">exf</span></code> Run-Time Considerations<a class="headerlink" href="#exf-run-time-considerations" title="Permalink to this headline">#</a></h3>
<section id="data-exf">
<h4>data.exf<a class="headerlink" href="#data-exf" title="Permalink to this headline">#</a></h4>
<p>The data.exf file is a required file when using the external forcing package. There are four main namelists in this file:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Namelist</p></th>
<th class="text-left head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">EXF_NML_01</span></code></p></td>
<td class="text-left"><p>Set parameters for reading, scaling, and applying external forcing conditions</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">EXF_NML_02</span></code></p></td>
<td class="text-left"><p>Set the file names and start dates for each external field file</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">EXF_NML_03</span></code></p></td>
<td class="text-left"><p>Set scaling parameters for the forcing fields</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">EXF_NML_04</span></code></p></td>
<td class="text-left"><p>Set the spatial interpolation method for each field</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">EXF_NML_OBCS</span></code></p></td>
<td class="text-left"><p>When using open boundaries, the time stepping is outlined in this namelist. Not required if boundary conditions are not used.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="formatting-the-fields">
<h4>Formatting the fields<a class="headerlink" href="#formatting-the-fields" title="Permalink to this headline">#</a></h4>
<p>The external forcing fields are stored in files sized (time, Ny, Nx). There are two ways the files can be organized:</p>
<ol class="arabic simple">
<li><p>All of the external forcing conditions can be added in a single file, or</p></li>
<li><p>The external forcing conditions can be stored in annual files. In this case, each file must end in an underscore and the year. For example, <code class="docutils literal notranslate"><span class="pre">UWIND_2001</span></code>, <code class="docutils literal notranslate"><span class="pre">UWIND_2002</span></code>, etc. When using this option, the flag <code class="docutils literal notranslate"><span class="pre">useExfYearlyFields=</span> <span class="pre">.TRUE.,</span></code> must be set in <code class="docutils literal notranslate"><span class="pre">EXF_NML_01</span></code> and the file name is specified as <code class="docutils literal notranslate"><span class="pre">uwindfile='UWIND'</span></code>, in <code class="docutils literal notranslate"><span class="pre">EXF_NML_02</span></code> - the underscore and year will be appended based on the model time.</p></li>
</ol>
</section>
<section id="temporal-interpolation">
<h4>Temporal Interpolation<a class="headerlink" href="#temporal-interpolation" title="Permalink to this headline">#</a></h4>
<p>In the data.exf file, temporal information is provided for each file in <code class="docutils literal notranslate"><span class="pre">EXF_NML_02</span></code>. For example, consider the following information for the zonal wind file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">uwindstartdate1</span>   <span class="o">=</span> <span class="mi">19920101</span><span class="p">,</span>
 <span class="n">uwindstartdate2</span>   <span class="o">=</span> <span class="mi">030000</span><span class="p">,</span>
 <span class="n">uwindperiod</span>       <span class="o">=</span> <span class="mf">21600.0</span><span class="p">,</span>
</pre></div>
</div>
<p>This information indicates the first timestep in the file corresponds to the date 1 January 1992 at 3:00 am. The first date line corresponds to the date (YYYYMMDD) and the second to the time (HHMMSS). The final line corresponds to the temporal resolution in the model - in this case, the file provides 6-hourly wind speeds i.e. the second timesteps corresponds to 1 January 1992 at 9:00 am.</p>
<p>In the special case that a climatological file is provided (i.e. if the file is a monthly file that will be repeated each year in the model), then the date information is omitted and the period is set to <code class="docutils literal notranslate"><span class="pre">uwindperiod</span> <span class="pre">=</span> <span class="pre">-12,</span></code>.</p>
<p>To determine the external forcing value at a given time, the model <strong>linearly interpolates between the two closest timesteps</strong> at each model point.</p>
</section>
<section id="spatial-interpolation">
<h4>Spatial Interpolation<a class="headerlink" href="#spatial-interpolation" title="Permalink to this headline">#</a></h4>
<p>There are two ways that the model can spatially interpolate from the provided conditions to the model grid.</p>
<p>First, the external forcing conditions can be provided on the exact same grid as the model. In this case, a flag of 0 should be provided in <code class="docutils literal notranslate"><span class="pre">EXF_NML_04</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">uwind_interpMethod</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</pre></div>
</div>
<p>Second, the model can linearly interpolate the external forcing conditions onto the model grid. In this case, the geographic information for the locations of the external forcing field must be provided in <code class="docutils literal notranslate"><span class="pre">EXF_NML_04</span></code>, e.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">uwind_lon0</span>        <span class="o">=</span>   <span class="mf">0.0000000</span><span class="n">D0</span><span class="p">,</span>
 <span class="n">uwind_lat0</span>        <span class="o">=</span> <span class="o">-</span><span class="mf">89.4628220</span><span class="n">D0</span><span class="p">,</span>
 <span class="n">uwind_lon_inc</span>     <span class="o">=</span>   <span class="mf">0.7031250</span><span class="n">D0</span><span class="p">,</span>
 <span class="n">uwind_lat_inc</span>     <span class="o">=</span> <span class="mf">0.6958694</span><span class="p">,</span><span class="mf">0.6999817</span><span class="p">,</span><span class="mf">0.7009048</span><span class="p">,</span><span class="mf">0.7012634</span><span class="p">,</span><span class="mf">0.7014313</span><span class="p">,</span>
                     <span class="mi">245</span><span class="o">*</span><span class="mf">0.7017418</span><span class="p">,</span>
                     <span class="mf">0.7014313</span><span class="p">,</span><span class="mf">0.7012634</span><span class="p">,</span><span class="mf">0.7009048</span><span class="p">,</span><span class="mf">0.6999817</span><span class="p">,</span><span class="mf">0.6958694</span>
 <span class="n">uwind_nlon</span>        <span class="o">=</span> <span class="mi">512</span><span class="p">,</span>
 <span class="n">uwind_nlat</span>        <span class="o">=</span> <span class="mi">256</span><span class="p">,</span>
</pre></div>
</div>
<p>where the lines above correspond to the lower left coordinates of the field, the grid spacings, and the shape of the field.</p>
</section>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "ms274"
        },
        kernelOptions: {
            name: "ms274",
            path: "./mitgcm"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'ms274'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="initial_conditions.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Initial Conditions</p>
      </div>
    </a>
    <a class="right-next"
       href="boundary_conditions.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Boundary Conditions</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#common-external-forcing-fields">Common External Forcing Fields</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example-fields">Example Fields</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-exf-package">The <code class="docutils literal notranslate"><span class="pre">exf</span></code> package</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exf-compile-time-considerations"><code class="docutils literal notranslate"><span class="pre">exf</span></code> Compile-Time Considerations</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exf-run-time-considerations"><code class="docutils literal notranslate"><span class="pre">exf</span></code> Run-Time Considerations</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#data-exf">data.exf</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#formatting-the-fields">Formatting the fields</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#temporal-interpolation">Temporal Interpolation</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#spatial-interpolation">Spatial Interpolation</a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Mike Wood
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>