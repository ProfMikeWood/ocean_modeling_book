

<!DOCTYPE html>


<html >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Boundary Conditions &#8212; Numerical Ocean Modeling</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'mitgcm/boundary_conditions';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Diagnosing Issues" href="diagnosing_issues.html" />
    <link rel="prev" title="External Forcing" href="external_forcing.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Numerical Ocean Modeling
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/setting_up_python_and_jupyter.html">Installing Python and Jupyter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/setting_up_a_github_repository.html">Setting up a Github Repository</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/getting_familiar_with_jupyter_notebooks.html">Getting Familiar with Jupyter Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/installing_compiler_and_mpi.html">Installing a compiler with MPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/getting_familiar_with_unix_environments.html">Getting Familiar with Unix Environments</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Oceanography</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../oceanography/oceanography_overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../oceanography/wind_driven_circulation.html">Wind-Driven Circulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../oceanography/thermohaline_circulation.html">Thermohaline Circulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../oceanography/primitive_equations.html">Primitive Equations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../oceanography/momentum.html">Momentum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../oceanography/thermodynamics.html">Thermodynamics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../oceanography/equation_of_state.html">Equation of State</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Numerical Modeling</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../modeling/model_grids.html">Model Grids</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modeling/timestepping_schemes.html">Time-Stepping Schemes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modeling/subgridscale_parameterizations.html">Sub-Grid-Scale Parameterizations</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">MITgcm</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_MITgcm.html">Getting Started with MITgcm</a></li>
<li class="toctree-l1"><a class="reference internal" href="file_layout.html">File Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="choosing_an_optfile.html">Choosing an optfile</a></li>
<li class="toctree-l1"><a class="reference internal" href="defining_the_grid.html">Defining the Model Grid</a></li>
<li class="toctree-l1"><a class="reference internal" href="initial_conditions.html">Initial Conditions</a></li>
<li class="toctree-l1"><a class="reference internal" href="external_forcing.html">External Forcing</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Boundary Conditions</a></li>
<li class="toctree-l1"><a class="reference internal" href="diagnosing_issues.html">Diagnosing Issues</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Computing Clusters</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../HPC/navigating_an_HPC.html">Navigating an HPC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../HPC/running_jobs_on_an_HPC.html">Running jobs on an HPC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../HPC/conda_environments_on_an_HPC.html">conda Environments</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Model Analysis</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../analysis/volume_budget.html">Volume Budgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../analysis/heat_budget.html">Heat Budgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../analysis/salt_budget.html">Salt Budgets</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">State Estimation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../state_estimation/greens_function.html">Green’s Functions</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../contributions.html">Contributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references.html">References</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fmitgcm/boundary_conditions.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/mitgcm/boundary_conditions.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Boundary Conditions</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#boundary-condition-options">Boundary Condition Options</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#option-1-global-model">Option 1: Global Model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#option-2-the-obcs-package">Option 2: The OBCS Package</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#obcs-compile-time-considerations"><code class="docutils literal notranslate"><span class="pre">obcs</span></code> Compile-Time Considerations</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#obcs-run-time-considerations"><code class="docutils literal notranslate"><span class="pre">obcs</span></code> Run-Time Considerations</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#assigning-boundary-locations">Assigning Boundary Locations</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#assigning-file-names">Assigning File Names</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#balancing-boundary-conditions">Balancing Boundary Conditions</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#assigning-sponge-parameters">Assigning Sponge Parameters</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#assigning-periodicity">Assigning Periodicity</a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#preparing-boundary-condition-fields">Preparing Boundary Condition Fields</a></li>
</ul>
</li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="boundary-conditions">
<h1>Boundary Conditions<a class="headerlink" href="#boundary-conditions" title="Permalink to this headline">#</a></h1>
<p>Boundary conditions are model state parameters that are applied at the edges of a regional domain. As typical domains are square, the sides of the domain are denoted “north”, “south”, “east” and “west” corresponding to the top, bottom, right, and left boundaries. However, it should be noted that these directions do not necessarily correspond to the cardinal directions in the model.</p>
<p>The typical boundary conditions required in a regional model are outlined in the following table:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Descrition</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">THETA</span></code></p></td>
<td><p>Potential Temperature</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">SALT</span></code></p></td>
<td><p>Salinity</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">UVEL</span></code></p></td>
<td><p>Velocity in the model x-direction</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VVEL</span></code></p></td>
<td><p>Velocity in the model y-direction</p></td>
</tr>
</tbody>
</table>
<p>Note that velocity may still be applied on boundaries when the velocity component is parallel. For example, <code class="docutils literal notranslate"><span class="pre">UVEL</span></code> can still be applied on the southern boundary even though it is parallel to the boundary.</p>
<p>In the case that the model also contains seaice, the following conditions are additionally applied:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Descrition</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">AREA</span></code></p></td>
<td><p>Sea ice concentration</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">HEFF</span></code></p></td>
<td><p>Effective sea ice thickness</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">HSNOW</span></code></p></td>
<td><p>Effective thickness of snow on sea ice</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">UICE</span></code></p></td>
<td><p>Sea ice velocity in the model x-direction</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">VICE</span></code></p></td>
<td><p>Sea ice velocity in the model y-direction</p></td>
</tr>
</tbody>
</table>
<section id="boundary-condition-options">
<h2>Boundary Condition Options<a class="headerlink" href="#boundary-condition-options" title="Permalink to this headline">#</a></h2>
<section id="option-1-global-model">
<h3>Option 1: Global Model<a class="headerlink" href="#option-1-global-model" title="Permalink to this headline">#</a></h3>
<p>The default behavior for boundary conditions in MITgcm is that the conditions are periodic. In other words, the right side is connected to the left side, and the top is connected to the bottom.</p>
<p>If you would like to generate an enclosed regional model, the most assured way to suppress the periodic behavior is to generate a bathymetry that has 0 depth on all four boundaries. This approach is used in the <a class="reference external" href="https://mitgcm.readthedocs.io/en/latest/examples/barotropic_gyre/barotropic_gyre.html">MITgcm Barotropic Gyre</a> tutorial.</p>
</section>
<section id="option-2-the-obcs-package">
<h3>Option 2: The OBCS Package<a class="headerlink" href="#option-2-the-obcs-package" title="Permalink to this headline">#</a></h3>
<p>In the case that a regional model is desired, the Open Boundary ConditionS (OBCS) package can be used.</p>
<section id="obcs-compile-time-considerations">
<h4><code class="docutils literal notranslate"><span class="pre">obcs</span></code> Compile-Time Considerations<a class="headerlink" href="#obcs-compile-time-considerations" title="Permalink to this headline">#</a></h4>
<p>To enable the <code class="docutils literal notranslate"><span class="pre">obcs</span></code> package for compilation, add a line for <code class="docutils literal notranslate"><span class="pre">obcs</span></code> in the <code class="docutils literal notranslate"><span class="pre">packages.conf</span></code> files.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While the <code class="docutils literal notranslate"><span class="pre">obcs</span></code> package does not strictly require the use of the <code class="docutils literal notranslate"><span class="pre">exf</span></code> package, the designation of condition time-stepping is provided in the <code class="docutils literal notranslate"><span class="pre">data.exf</span></code> package and its funtionality was built around tools from the <code class="docutils literal notranslate"><span class="pre">cal</span></code> package. With this in mind, most regional models that use <code class="docutils literal notranslate"><span class="pre">obcs</span></code> also enable the <code class="docutils literal notranslate"><span class="pre">exf</span></code> and <code class="docutils literal notranslate"><span class="pre">cal</span></code> packages by adding these to the <code class="docutils literal notranslate"><span class="pre">packages.conf</span></code> file.</p>
</div>
<p>By default, the <a class="reference external" href="https://github.com/MITgcm/MITgcm/blob/master/pkg/obcs/OBCS_OPTIONS.h">OBCS_OPTIONS.h</a> file will allow for the presciption of boundary conditions on all four sides of the model. If you model has fewer boundaries (e.g. one or more is on land), then consider turning off one or more of these options to save time in running the model. For example, if your model does not have an eastern boundary, then consider deactivating this code using the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#undef ALLOW_OBCS_WEST</span>
</pre></div>
</div>
<p>In addition, the <code class="docutils literal notranslate"><span class="pre">obcs</span></code> package does not activate code for a boundary “sponge” by default. If you would like to add a sponge to your boundaries (see below), then consider including this code in the <code class="docutils literal notranslate"><span class="pre">OBCS_OPTIONS.h</span></code> by modifying the sponge line as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#define ALLOW_OBCS_SPONGE</span>
</pre></div>
</div>
</section>
<section id="obcs-run-time-considerations">
<h4><code class="docutils literal notranslate"><span class="pre">obcs</span></code> Run-Time Considerations<a class="headerlink" href="#obcs-run-time-considerations" title="Permalink to this headline">#</a></h4>
<p>The data.obcs file is a required file when using the boundary condition package. There is one main parameter list in this file (<code class="docutils literal notranslate"><span class="pre">&amp;OBCS_PARM01</span></code>) which contains the majority of the periment information.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Namelist</p></th>
<th class="text-left head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">OBCS_PARM01</span></code></p></td>
<td class="text-left"><p>Set parameters for reading and applying boundary conditions</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">OBCS_PARM02</span></code></p></td>
<td class="text-left"><p>Used to provide Orlankski boundary conditions. Not required when Orlanski conditions are turned off.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">OBCS_PARM03</span></code></p></td>
<td class="text-left"><p>Used to provide sponge parameters. Not required when the sponge code is turned off.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">OBCS_PARM04</span></code></p></td>
<td class="text-left"><p>Used to provide Stevens boundary conditions. Not required when Stevens conditions are turned off.</p></td>
</tr>
</tbody>
</table>
<section id="assigning-boundary-locations">
<h5>Assigning Boundary Locations<a class="headerlink" href="#assigning-boundary-locations" title="Permalink to this headline">#</a></h5>
<p>The boundary location assignment is typically provided at the top of the <code class="docutils literal notranslate"><span class="pre">&amp;OBCS_PARM01</span></code> namelist. For each of the boundaries used in the regional model, an array of indices equal to the length of the boundary must be provided. For example, consider a regional domain with 240 columns and 360 rows with open boundaries on the north, south, and west sides of the domain but a closed east side on land. In the case that the bottom row is the southern boundary, the left column is the west boundary, and the top row is north boundary, the locations of the boundaries would be provided as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">OB_Jsouth</span> <span class="o">=</span>   <span class="mi">240</span><span class="o">*</span><span class="mi">1</span><span class="p">,</span>
  <span class="n">OB_Iwest</span>  <span class="o">=</span>   <span class="mi">360</span><span class="o">*</span><span class="mi">1</span><span class="p">,</span>
  <span class="n">OB_Jnorth</span> <span class="o">=</span>   <span class="mi">240</span><span class="o">*</span><span class="mi">360</span><span class="p">,</span>
</pre></div>
</div>
<p>This situation is most common for regional model although there is a lot of flexibility in how the conditions may be applied. For more information, see the <a class="reference external" href="https://mitgcm.readthedocs.io/en/latest/phys_pkgs/obcs.html">obcs documentation</a>.</p>
</section>
<section id="assigning-file-names">
<h5>Assigning File Names<a class="headerlink" href="#assigning-file-names" title="Permalink to this headline">#</a></h5>
<p>The <code class="docutils literal notranslate"><span class="pre">&amp;OBCS_PARM01</span></code> namelist also contains the list of files that will be provided on each boundary. The file names are specified with the letters “OB” then a capital letter corresponding to the boundary, and then a letter or letters corresponding to the vairables, followed by the word file. For example, <code class="docutils literal notranslate"><span class="pre">OBNtFile</span></code> and <code class="docutils literal notranslate"><span class="pre">OBWsFile</span></code> would correspond to the files for <code class="docutils literal notranslate"><span class="pre">THETA</span></code> (t) on the northern (n) boundary and <code class="docutils literal notranslate"><span class="pre">SALT</span></code> (s) on the western (W) boundary. The full list of variable letters is as follows:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Letter for file assignment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">THETA</span></code></p></td>
<td><p>t</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">SALT</span></code></p></td>
<td><p>s</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">UVEL</span></code></p></td>
<td><p>u</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VVEL</span></code></p></td>
<td><p>v</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">AREA</span></code></p></td>
<td><p>a</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">HEFF</span></code></p></td>
<td><p>h</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">HSNOW</span></code></p></td>
<td><p>sn</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">UICE</span></code></p></td>
<td><p>uice</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">VICE</span></code></p></td>
<td><p>vice</p></td>
</tr>
</tbody>
</table>
<p>With this convention, the files are identified in the namelist. For example, the files for theta on the northern, southern, and western boundaries may be listed as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">OBNtFile</span><span class="o">=</span><span class="s1">&#39;Theta_north.bin&#39;</span>
 <span class="n">OBStFile</span><span class="o">=</span><span class="s1">&#39;Theta_south.bin&#39;</span>
 <span class="n">OBWtFile</span><span class="o">=</span><span class="s1">&#39;Theta_west.bin&#39;</span>
</pre></div>
</div>
<p>These lines would repeat for each variable being prescribed with boundary conditions in the given file.</p>
</section>
<section id="balancing-boundary-conditions">
<h5>Balancing Boundary Conditions<a class="headerlink" href="#balancing-boundary-conditions" title="Permalink to this headline">#</a></h5>
<p>One convenient option provided by the <code class="docutils literal notranslate"><span class="pre">obcs</span></code> package is the ability to balance flow through each of the boundaries. While every attempt should be made to balance the conditions when the files are formulated, often differences can arise. The balancing option ensures that no mass is loss or gained in the domain. To run the balancing script, provide the following lines in the <code class="docutils literal notranslate"><span class="pre">&amp;OBCS_PARM01</span></code> namelist:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">useOBCSbalance</span> <span class="o">=</span> <span class="o">.</span><span class="n">TRUE</span><span class="o">.</span><span class="p">,</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Mass additions into the domain such as those from precipitation or runoff will not be included in the balancing code by default. In effect, if your mass additions are not equal to your mass loss (e.g. precipitation &gt; evaporation), this will change the volume in your domain and will likely lead to issues. This can be averted by setting <code class="docutils literal notranslate"><span class="pre">OBCSbalanceSurf</span> <span class="pre">=</span> <span class="pre">.TRUE.</span></code> in <code class="docutils literal notranslate"><span class="pre">&amp;OBCS_PARM01</span></code>.</p>
</div>
</section>
<section id="assigning-sponge-parameters">
<h5>Assigning Sponge Parameters<a class="headerlink" href="#assigning-sponge-parameters" title="Permalink to this headline">#</a></h5>
<p>Under construction.</p>
</section>
<section id="assigning-periodicity">
<h5>Assigning Periodicity<a class="headerlink" href="#assigning-periodicity" title="Permalink to this headline">#</a></h5>
<p>Under construction.</p>
</section>
</section>
<section id="preparing-boundary-condition-fields">
<h4>Preparing Boundary Condition Fields<a class="headerlink" href="#preparing-boundary-condition-fields" title="Permalink to this headline">#</a></h4>
<p>Under construction.</p>
</section>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./mitgcm"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="external_forcing.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">External Forcing</p>
      </div>
    </a>
    <a class="right-next"
       href="diagnosing_issues.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Diagnosing Issues</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#boundary-condition-options">Boundary Condition Options</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#option-1-global-model">Option 1: Global Model</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#option-2-the-obcs-package">Option 2: The OBCS Package</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#obcs-compile-time-considerations"><code class="docutils literal notranslate"><span class="pre">obcs</span></code> Compile-Time Considerations</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#obcs-run-time-considerations"><code class="docutils literal notranslate"><span class="pre">obcs</span></code> Run-Time Considerations</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#assigning-boundary-locations">Assigning Boundary Locations</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#assigning-file-names">Assigning File Names</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#balancing-boundary-conditions">Balancing Boundary Conditions</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#assigning-sponge-parameters">Assigning Sponge Parameters</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#assigning-periodicity">Assigning Periodicity</a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#preparing-boundary-condition-fields">Preparing Boundary Condition Fields</a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Mike Wood
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>